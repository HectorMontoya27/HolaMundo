PROCESSOR 16F877A
INCLUDE <P16F877A.INC>

ORG 0
GOTO INICIO
ORG 5

INICIO:
	CLRF PORTA ; Limpia los puertos A y B
	CLRF PORTB
	BSF STATUS,RP0
	BCF STATUS,RP1 ; Cambia al banco 1 de RAM
	MOVLW H'0'
	MOVWF TRISB
	CLRF PORTB
	MOVLW H'06'
	MOVWF ADCON1 ; Configura ADCON1
	MOVLW H'3F'
	MOVWF TRISA
	BCF STATUS, RP0 ; Regresa al banco 0 de RAM

CICLO:

	MOVFW PORTA
	XORLW B'000000' ; La entrada es 0000?
	BTFSC STATUS,Z
	GOTO DETENIDO ; Se va al estado PAROPARO

	MOVFW PORTA
	XORLW B'000001'
	BTFSC STATUS,Z
	GOTO HORARIO5

	MOVFW PORTA
	XORLW B'000010'
	BTFSC STATUS,Z
	GOTO ANTI10

	MOVFW PORTA
	XORLW B'000011'
	BTFSC STATUS,Z
	GOTO VUELTAS5

	MOVFW PORTA
	XORLW B'000100'
	BTFSC STATUS,Z
	GOTO ANTIVUELTAS10

PAROPARO:
	MOVLW B'00000000' ; Ambos motores apagados
	MOVWF PORTB
	GOTO CICLO

PAROHORARIO:
	MOVLW B'00000101' ; apagado, giro derecha
	MOVWF PORTB
	GOTO CICLO

PAROANTIHO:
	MOVLW B'00000110' ; apagado, antihorario
	MOVWF PORTB
	GOTO CICLO

HORARIOPARO:
	MOVLW B'00011000' ; giro derecha, paro
	MOVWF PORTB
	GOTO CICLO

ANTIHOPARO:
	MOVLW B'00101000' ; giro izquierda, paro
	MOVWF PORTB
	GOTO CICLO

DERDER:
	MOVLW B'00011101' ; derecha, derecha
	MOVWF PORTB
	GOTO CICLO

ANTIANTI:
	MOVLW B'00101110' ; izquierda izquierda
	MOVWF PORTB
	GOTO CICLO

HORAANTI:
	MOVLW B'00011110' ; derecha, izquierda
	MOVWF PORTB
	GOTO CICLO

ANTIHORA:
	MOVLW B'00101101' ; izquierda, derecha
	MOVWF PORTB
	GOTO CICLO

END